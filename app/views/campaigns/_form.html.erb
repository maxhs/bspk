<div id="edit-campaign-<%= @campaign.id %>" class="space-y-8 p-20 w-full divide-y divide-gray-200 shadow sm:rounded-md sm:overflow-hidden">
  <div class="mt-5 md:mt-0 md:col-span-2">
    <div>
      <h3 class="text-lg leading-6 font-medium text-gray-900">Your campaign</h3>
      <p class="mt-1 text-sm text-gray-500">Basic campaign information</p>
    </div>
    
      <div class="">
        <div class="py-5 bg-white space-y-6">
          <div class="">
            <%= form_with model: @campaign, class:"sm:max-w-lg sm:w-full sm:flex" do |f| %>
              <div class="min-w-0 flex-1">
                <%= f.label :title, "Title", class: "block text-sm font-medium text-gray-700" %>
                <%= f.text_field :title, class: "focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300", placeholder: "A title for your campaign" %>
              </div>
              <div class="mt-4">
                <%= f.submit "Save", class:"cursor-pointer block w-full rounded-md border border-transparent px-5 py-2 mt-1 ml-5 bg-rose-500 text-sm font-medium text-white shadow hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2" %>
              </div>
            <% end %>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Training files</label>
            <div class="training_files">
              <ul role="list" id="training-list" class="divide-y divide-gray-200">
                <%= render partial:"trainings/train", collection: @campaign.trainings, as: :training %>
              </ul>
            </div>

            <div class="clear-both mt-1 flex pt-5 pb-6">
              <%= form_with model: Training.new do |f| %>
                <%= f.hidden_field :campaign_id, value: @campaign.id %>
                <div class="space-y-1">
                  <div class="text-sm text-gray-600">
                    <label for="training_file" class="relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500">
                      <span>Select a file</span>
                      <%= f.file_field :file, class:"sr-only ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
                    </label>
                    <%= f.submit "Upload", class:"cursor-pointer justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500" %>
                  </div>
                  
                </div>
              <% end %>
            </div>
            
            <p class="text-xs text-gray-500">Train your model by uploading a new set of text prompts and answers. Must be a .jsonl file (sample below).</p>
            <div class="clear-both mt-1 prose max-w-full prose-primary">
              <pre>
                <code class="language-json">
                {"prompt": "Tell me about ice cream", "completion": "It's sweet, creamy, and delicious"}
                {"prompt": "...", "completion": "..."}
                {"prompt": "...", "completion": "..."}
              </code></pre>
            </div>
          </div>
      
        </div>
        <div class="pt-5">
          <div class="flex justify-end">
            <button type="button" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Cancel</button>
            
          </div>
        </div>
      </div>

    <% if @campaign.persisted? %>
      <div class="px-4 py-5 bg-white space-y-6 sm:p-6">
        <%= form_with url: prompt_campaign_path(@campaign), remote: true do |f| %>
          <div class="">
            <div class="grid grid-cols-3 gap-6">
              <div class="col-span-3 sm:col-span-2">
                <%= f.label :prompt, "Prompt", class: "block text-sm font-medium text-gray-700" %>
                <div class="mt-1 flex rounded-md shadow-sm">
                  <%= f.text_area :prompt, rows: 3, class: "focus:ring-blue-500 focus:border-blue-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300", placeholder: "Prompt a text response" %>
                </div>
              </div>
            </div>
          <div class="flex justify-end">
            <%= f.submit "Submit", class:"cursor-pointer ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500" %>
          </div>
        <% end %>  
        <%= render partial:"campaigns/prompt" %>
      </div>
    <% end %>
  </div>
</div>

<div class="hidden sm:block" aria-hidden="true">
  <div class="py-5">
    <div class=""></div>
  </div>
</div>
